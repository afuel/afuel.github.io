<!DOCTYPE html>

<html>
<head>
  <link rel="stylesheet" href="stylesheet.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/b13d216204.js" crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grade Calculator</title>
  <!-- favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="cloud-favicon.ico"/>
</head>

  <body>

    <div id="header">
      <header>Final Exam Grade Calculator</header>
    </div>


    <div id="user-input">
      <p class="subtitle">Enter your current grade</p>
      <input class="inputbox" type="number" max="100" min="0" id="currentGrade" value="">
      <p class="subtitle">Enter your exam weighting</p>
      <input class="inputbox" type="number" max="100" min="0" id="weight" value="">
      <p class="subtitle">Enter your desired final grade</p>
      <input class="inputbox" type="number" max="100" min="0" id="finalGrade" value="">
      <p></p>
      <div id="calc-btn">
        <img src="cloud-button.png" alt="" id="calculate-overlay">
        <img src="cloud-button.png" alt="" id="calculate">
        <div id="calc-text" oncontextmenu="return false" onselectstart="return false" ondragstart="return false">Calculate</div>

        <!-- <button type="button" id="calculate"> </button>-->
      </div>
      <p class="subtitle" id="output"></p>
    </div>
  </body>

</html>

<script>
//When calculate button is clicked, exam grade will be calculated and displayed
document.getElementById('calculate-overlay').addEventListener("click", function(){
  if (examGrade() < 0){
    document.getElementById('output').innerHTML = 'You need at least a 0% on your final exam.';
  }
  //Round to two decimal places
  else if ((examGrade() <= 100) && (examGrade().toString().includes('.'))){
    document.getElementById('output').innerHTML = 'You need at least a ' + examGrade().toString().substring(0, 5) +  '% on your final exam.';
  }
  else if (examGrade() <= 100){
    document.getElementById('output').innerHTML = 'You need at least a ' + examGrade() +  '% on your final exam.';
  }
  else if (examGrade() > 100){
    document.getElementById('output').innerHTML = 'You cannot achieve your desired grade.';
  }

});

//Calculates minimum exam grade to achieve desired final grade
  function examGrade(){
    var minExamGrade;
    var currentGrade = document.getElementById('currentGrade').value;
    var weight = document.getElementById('weight').value;
    var weight_proportion = weight/100;
    var finalGrade = document.getElementById('finalGrade').value;

    minExamGrade = (finalGrade - (currentGrade * (1 - weight_proportion))) / weight_proportion;
    return minExamGrade;
  }

</script>
